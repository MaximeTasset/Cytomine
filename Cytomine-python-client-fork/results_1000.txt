1000 estimators
load data from file
fit_transform pca
transform
================================================
Test: Comparaison Of Feature Importance Measure
================================================
getting feature importances from ETC
getting feature importances from f_classif
getting feature importances from chi2
getting sum of ETC, chi2 and f_classif
train set size: 34640
test set size: 9897
validation set size: 4948

Scores with best 1650 features/components:

Scores before PCA:
	 -imp :	0.9393755683540467
	 -f_classif :	0.940183894109326
	 -chi2 :	0.9398807719510963
	 -Sum :	0.9404870162675558
Score after PCA: 0.8678387390118217

Scores with best 1550 features/components:

Scores before PCA:
	 -imp :	0.9396786905122765
	 -f_classif :	0.9404870162675558
	 -chi2 :	0.940183894109326
	 -Sum :	0.9336162473476811
Score after PCA: 0.871476204910579

Scores with best 1450 features/components:

Scores before PCA:
	 -imp :	0.9400828533899162
	 -f_classif :	0.9406890977063757
	 -chi2 :	0.9405880569869658
	 -Sum :	0.9331110437506315
Score after PCA: 0.8707689198747095

Scores with best 1350 features/components:

Scores before PCA:
	 -imp :	0.9406890977063757
	 -f_classif :	0.940284934828736
	 -chi2 :	0.941497423461655
	 -Sum :	0.9349297767000101
Score after PCA: 0.8724866121046781

Scores with best 1250 features/components:

Scores before PCA:
	 -imp :	0.9411943013034253
	 -f_classif :	0.9406890977063757
	 -chi2 :	0.9409922198646055
	 -Sum :	0.9341214509447308
Score after PCA: 0.8776396887945842

Scores with best 1150 features/components:

Scores before PCA:
	 -imp :	0.9420026270587046
	 -f_classif :	0.9394766090734566
	 -chi2 :	0.9411943013034253
	 -Sum :	0.9330100030312216
Score after PCA: 0.877942810952814

Scores with best 1050 features/components:

Scores before PCA:
	 -imp :	0.9430130342528039
	 -f_classif :	0.940284934828736
	 -chi2 :	0.9411943013034253
	 -Sum :	0.9331110437506315
Score after PCA: 0.8823886026068506

Scores with best 950 features/components:

Scores before PCA:
	 -imp :	0.9428109528139841
	 -f_classif :	0.9399818126705062
	 -chi2 :	0.9399818126705062
	 -Sum :	0.9288673335354147
Score after PCA: 0.8881479236132162

Scores with best 850 features/components:

Scores before PCA:
	 -imp :	0.9447307264827726
	 -f_classif :	0.9397797312316863
	 -chi2 :	0.940183894109326
	 -Sum :	0.9241184197231485
Score after PCA: 0.8917853895119733

Scores with best 750 features/components:

Scores before PCA:
	 -imp :	0.9448317672021824
	 -f_classif :	0.9304839850459735
	 -chi2 :	0.9319995958371223
	 -Sum :	0.9209861574214409
Score after PCA: 0.8965343033242397

Scores with best 650 features/components:

Scores before PCA:
	 -imp :	0.9445286450439527
	 -f_classif :	0.9317975143983025
	 -chi2 :	0.9321006365565323
	 -Sum :	0.9137112256239265
Score after PCA: 0.8993634434677175

Scores with best 550 features/components:

Scores before PCA:
	 -imp :	0.9444276043245428
	 -f_classif :	0.9331110437506315
	 -chi2 :	0.932504799434172
	 -Sum :	0.906436293826412
Score after PCA: 0.9037081944023442

Scores with best 450 features/components:

Scores before PCA:
	 -imp :	0.9445286450439527
	 -f_classif :	0.9346266545417803
	 -chi2 :	0.9332120844700414
	 -Sum :	0.8951197332525007
Score after PCA: 0.9086591896534303

Scores with best 350 features/components:

Scores before PCA:
	 -imp :	0.9434171971304436
	 -f_classif :	0.9343235323835506
	 -chi2 :	0.9332120844700414
	 -Sum :	0.8836010912397696
Score after PCA: 0.9107810447610387

Scores with best 250 features/components:

Scores before PCA:
	 -imp :	0.9427099120945741
	 -f_classif :	0.9365464282105689
	 -chi2 :	0.9300798221683338
	 -Sum :	0.8547034454885318
Score after PCA: 0.9175507729615034

Scores with best 150 features/components:

Scores before PCA:
	 -imp :	0.9390724461958169
	 -f_classif :	0.9374557946852582
	 -chi2 :	0.9292714964130545
	 -Sum :	0.5829039102758412
Score after PCA: 0.9218955238961302

Scores with best 50 features/components:

Scores before PCA:
	 -imp :	0.9255329897948873
	 -f_classif :	0.9361422653329292
	 -chi2 :	0.9189653430332424
	 -Sum :	0.5715873497019299
Score after PCA: 0.9274527634636759

Scores with best 49 features/components:

Scores before PCA:
	 -imp :	0.9252298676366576
	 -f_classif :	0.9355360210164696
	 -chi2 :	0.920784075982621
	 -Sum :	0.5715873497019299
Score after PCA: 0.9258361119531171

Scores with best 48 features/components:

Scores before PCA:
	 -imp :	0.923411134687279
	 -f_classif :	0.9344245731029605
	 -chi2 :	0.9193695059108821
	 -Sum :	0.5715873497019299
Score after PCA: 0.9236132161260988

Scores with best 47 features/components:

Scores before PCA:
	 -imp :	0.9216934424573103
	 -f_classif :	0.9326058401535819
	 -chi2 :	0.9167424472062241
	 -Sum :	0.5715873497019299
Score after PCA: 0.9262402748307568

Scores with best 46 features/components:

Scores before PCA:
	 -imp :	0.9222996867737698
	 -f_classif :	0.9341214509447308
	 -chi2 :	0.9171466100838638
	 -Sum :	0.5715873497019299
Score after PCA: 0.923512175406689

Scores with best 45 features/components:

Scores before PCA:
	 -imp :	0.9225017682125897
	 -f_classif :	0.9346266545417803
	 -chi2 :	0.9176518136809134
	 -Sum :	0.5715873497019299
Score after PCA: 0.9240173790037385

Scores with best 44 features/components:

Scores before PCA:
	 -imp :	0.9221986460543599
	 -f_classif :	0.9348287359806002
	 -chi2 :	0.9167424472062241
	 -Sum :	0.5715873497019299
Score after PCA: 0.92209760533495

Scores with best 43 features/components:

Scores before PCA:
	 -imp :	0.9232090532484591
	 -f_classif :	0.9328079215924018
	 -chi2 :	0.9173486915226836
	 -Sum :	0.5715873497019299
Score after PCA: 0.9210871981408507

Scores with best 42 features/components:

Scores before PCA:
	 -imp :	0.9227038496514095
	 -f_classif :	0.9328079215924018
	 -chi2 :	0.9174497322420936
	 -Sum :	0.5715873497019299
Score after PCA: 0.9215924017379004

Scores with best 41 features/components:

Scores before PCA:
	 -imp :	0.9239163382843286
	 -f_classif :	0.9333131251894513
	 -chi2 :	0.9176518136809134
	 -Sum :	0.5715873497019299
Score after PCA: 0.9200767909467515

Scores with best 40 features/components:

Scores before PCA:
	 -imp :	0.9243205011619683
	 -f_classif :	0.9329089623118116
	 -chi2 :	0.9179549358391432
	 -Sum :	0.5715873497019299
Score after PCA: 0.9151257956956653

Scores with best 39 features/components:

Scores before PCA:
	 -imp :	0.920784075982621
	 -f_classif :	0.9344245731029605
	 -chi2 :	0.9175507729615034
	 -Sum :	0.5715873497019299
Score after PCA: 0.9031019500858846

Scores with best 38 features/components:

Scores before PCA:
	 -imp :	0.9208851167020309
	 -f_classif :	0.9330100030312216
	 -chi2 :	0.9173486915226836
	 -Sum :	0.5715873497019299
Score after PCA: 0.905122764474083

Scores with best 37 features/components:

Scores before PCA:
	 -imp :	0.9215924017379004
	 -f_classif :	0.9326058401535819
	 -chi2 :	0.9193695059108821
	 -Sum :	0.5715873497019299
Score after PCA: 0.9031019500858846

Scores with best 36 features/components:

Scores before PCA:
	 -imp :	0.9217944831767202
	 -f_classif :	0.9326058401535819
	 -chi2 :	0.9199757502273416
	 -Sum :	0.5715873497019299
Score after PCA: 0.9026977872082449

Scores with best 35 features/components:

Scores before PCA:
	 -imp :	0.9213903202990805
	 -f_classif :	0.9318985551177125
	 -chi2 :	0.9182580579973729
	 -Sum :	0.5715873497019299
Score after PCA: 0.9022936243306052

Scores with best 34 features/components:

Scores before PCA:
	 -imp :	0.9198747095079317
	 -f_classif :	0.9317975143983025
	 -chi2 :	0.9184601394361928
	 -Sum :	0.5715873497019299
Score after PCA: 0.9024957057694251

Scores with best 33 features/components:

Scores before PCA:
	 -imp :	0.9213903202990805
	 -f_classif :	0.932504799434172
	 -chi2 :	0.9168434879256341
	 -Sum :	0.5715873497019299
Score after PCA: 0.9034050722441144

Scores with best 32 features/components:

Scores before PCA:
	 -imp :	0.9208851167020309
	 -f_classif :	0.9290694149742346
	 -chi2 :	0.9169445286450439
	 -Sum :	0.5715873497019299
Score after PCA: 0.9037081944023442

Scores with best 31 features/components:

Scores before PCA:
	 -imp :	0.9228048903708195
	 -f_classif :	0.9276548449024957
	 -chi2 :	0.9182580579973729
	 -Sum :	0.5715873497019299
Score after PCA: 0.9031019500858846

Scores with best 30 features/components:

Scores before PCA:
	 -imp :	0.9200767909467515
	 -f_classif :	0.9289683742548247
	 -chi2 :	0.9173486915226836
	 -Sum :	0.5715873497019299
Score after PCA: 0.9022936243306052

Scores with best 29 features/components:

Scores before PCA:
	 -imp :	0.9215924017379004
	 -f_classif :	0.9273517227442659
	 -chi2 :	0.9174497322420936
	 -Sum :	0.5715873497019299
Score after PCA: 0.9022936243306052

Scores with best 28 features/components:

Scores before PCA:
	 -imp :	0.9218955238961302
	 -f_classif :	0.9250277861978378
	 -chi2 :	0.9174497322420936
	 -Sum :	0.5715873497019299
Score after PCA: 0.9021925836111954

Scores with best 27 features/components:

Scores before PCA:
	 -imp :	0.9214913610184905
	 -f_classif :	0.924623623320198
	 -chi2 :	0.9182580579973729
	 -Sum :	0.5715873497019299
Score after PCA: 0.9007780135394564

Scores with best 26 features/components:

Scores before PCA:
	 -imp :	0.9215924017379004
	 -f_classif :	0.9258361119531171
	 -chi2 :	0.9163382843285844
	 -Sum :	0.5715873497019299
Score after PCA: 0.9040113165605739

Scores with best 25 features/components:

Scores before PCA:
	 -imp :	0.9212892795796707
	 -f_classif :	0.9248257047590179
	 -chi2 :	0.9166414064868141
	 -Sum :	0.5715873497019299
Score after PCA: 0.9021925836111954

Scores with best 24 features/components:

Scores before PCA:
	 -imp :	0.9202788723855714
	 -f_classif :	0.924724664039608
	 -chi2 :	0.9165403657674043
	 -Sum :	0.5715873497019299
Score after PCA: 0.9027988279276549

Scores with best 23 features/components:

Scores before PCA:
	 -imp :	0.920683035263211
	 -f_classif :	0.9215924017379004
	 -chi2 :	0.9151257956956653
	 -Sum :	0.5715873497019299
Score after PCA: 0.9023946650500152

Scores with best 22 features/components:

Scores before PCA:
	 -imp :	0.9215924017379004
	 -f_classif :	0.9227038496514095
	 -chi2 :	0.912902899868647
	 -Sum :	0.5715873497019299
Score after PCA: 0.9046175608770335

Scores with best 21 features/components:

Scores before PCA:
	 -imp :	0.9202788723855714
	 -f_classif :	0.9229059310902293
	 -chi2 :	0.9127008184298272
	 -Sum :	0.5715873497019299
Score after PCA: 0.9031019500858846

Scores with best 20 features/components:

Scores before PCA:
	 -imp :	0.9218955238961302
	 -f_classif :	0.9222996867737698
	 -chi2 :	0.9081539860563808
	 -Sum :	0.5715873497019299
Score after PCA: 0.9041123572799838

Scores with best 19 features/components:

Scores before PCA:
	 -imp :	0.9184601394361928
	 -f_classif :	0.9163382843285844
	 -chi2 :	0.9071435788622815
	 -Sum :	0.5715873497019299
Score after PCA: 0.9044154794382137

Scores with best 18 features/components:

Scores before PCA:
	 -imp :	0.9118924926745479
	 -f_classif :	0.9122966555521875
	 -chi2 :	0.905223805193493
	 -Sum :	0.5715873497019299
Score after PCA: 0.9049206830352632

Scores with best 17 features/components:

Scores before PCA:
	 -imp :	0.911690411235728
	 -f_classif :	0.9066383752652319
	 -chi2 :	0.9057290087905426
	 -Sum :	0.5715873497019299
Score after PCA: 0.9045165201576235

Scores with best 16 features/components:

Scores before PCA:
	 -imp :	0.9117914519551379
	 -f_classif :	0.9061331716681823
	 -chi2 :	0.9062342123875922
	 -Sum :	0.5715873497019299
Score after PCA: 0.9035061129635243

Scores with best 15 features/components:

Scores before PCA:
	 -imp :	0.901283217136506
	 -f_classif :	0.9068404567040518
	 -chi2 :	0.9046175608770335
	 -Sum :	0.5715873497019299
Score after PCA: 0.9022936243306052

Scores with best 14 features/components:

Scores before PCA:
	 -imp :	0.9009800949782762
	 -f_classif :	0.9041123572799838
	 -chi2 :	0.9044154794382137
	 -Sum :	0.5715873497019299
Score after PCA: 0.9028998686470647

Scores with best 13 features/components:

Scores before PCA:
	 -imp :	0.8924926745478428
	 -f_classif :	0.9057290087905426
	 -chi2 :	0.9045165201576235
	 -Sum :	0.5715873497019299
Score after PCA: 0.9042133979993937

Scores with best 12 features/components:

Scores before PCA:
	 -imp :	0.8944124482166314
	 -f_classif :	0.906537334545822
	 -chi2 :	0.9040113165605739
	 -Sum :	0.5715873497019299
Score after PCA: 0.9046175608770335

Scores with best 11 features/components:

Scores before PCA:
	 -imp :	0.8920885116702031
	 -f_classif :	0.9070425381428716
	 -chi2 :	0.9013842578559159
	 -Sum :	0.5715873497019299
Score after PCA: 0.9035061129635243

Scores with best 10 features/components:

Scores before PCA:
	 -imp :	0.8894614529655451
	 -f_classif :	0.905122764474083
	 -chi2 :	0.8991613620288976
	 -Sum :	0.5715873497019299
Score after PCA: 0.8889562493684955

Scores with best 9 features/components:

Scores before PCA:
	 -imp :	0.8859250277861979
	 -f_classif :	0.9033040315247045
	 -chi2 :	0.8949176518136809
	 -Sum :	0.5715873497019299
Score after PCA: 0.8780438516722239

Scores with best 8 features/components:

Scores before PCA:
	 -imp :	0.8861271092250177
	 -f_classif :	0.9006769728200464
	 -chi2 :	0.8955238961301405
	 -Sum :	0.5715873497019299
Score after PCA: 0.8738001414570071

Scores with best 7 features/components:

Scores before PCA:
	 -imp :	0.8825906840456704
	 -f_classif :	0.8992624027483076
	 -chi2 :	0.7307264827725574
	 -Sum :	0.5715873497019299
Score after PCA: 0.8720824492270385

Scores with best 6 features/components:

Scores before PCA:
	 -imp :	0.8809740325351116
	 -f_classif :	0.8953218146913205
	 -chi2 :	0.7199151257956957
	 -Sum :	0.5715873497019299
Score after PCA: 0.8471253915327878

Scores with best 5 features/components:

Scores before PCA:
	 -imp :	0.8750126300899262
	 -f_classif :	0.8875416792967566
	 -chi2 :	0.6949580681014449
	 -Sum :	0.5715873497019299
Score after PCA: 0.8345963423259574

Scores with best 4 features/components:

Scores before PCA:
	 -imp :	0.8680408204506416
	 -f_classif :	0.8770334444781247
	 -chi2 :	0.6784884308376276
	 -Sum :	0.5715873497019299
Score after PCA: 0.8144892391633829

Scores with best 3 features/components:

Scores before PCA:
	 -imp :	0.8535919975750227
	 -f_classif :	0.8662220875012631
	 -chi2 :	0.6097807416388805
	 -Sum :	0.5715873497019299
Score after PCA: 0.7071839951500455

Scores with best 2 features/components:

Scores before PCA:
	 -imp :	0.858441952106699
	 -f_classif :	0.8501566131150854
	 -chi2 :	0.61028594523593
	 -Sum :	0.5715873497019299
Score after PCA: 0.6644437708396483

Scores with best 1 features/components:

Scores before PCA:
	 -imp :	0.8656158431848034
	 -f_classif :	0.8656158431848034
	 -chi2 :	0.6195816914216429
	 -Sum :	0.5715873497019299
Score after PCA: 0.5348085278367182
Bests tested on validation set:
Score imp (with 1649 features):	0.9458367016976557 (test:	750)
Score f_c (with 1649 features):	0.946645109135004 (test:	1450)
Score chi2 (with 1649 features):	0.9458367016976557 (test:	1350)
Score sum (with 1649 features):	0.9426030719482619 (test:	1650)
Score PCA (with 1649 cpts):	0.8706548100242523 (test:	50)
================================================
Test: explained variance ratio in PCA
================================================
ratio explained >= 0.90 with 16 components
ratio explained >= 0.91 with 18 components
ratio explained >= 0.92 with 21 components
ratio explained >= 0.93 with 24 components
ratio explained >= 0.94 with 29 components
ratio explained >= 0.95 with 35 components
ratio explained >= 0.96 with 44 components
ratio explained >= 0.97 with 58 components
ratio explained >= 0.98 with 86 components
ratio explained >= 0.99 with 171 components
================================================
Test: Spaciality Importance (tile size)
================================================
train set size: 34632
test set size: 9894
validation set size: 4948
Score with a slice size of 1:	0.9451182534869618
train set size: 34597
test set size: 9884
validation set size: 4943
Score with a slice size of 2:	0.9742007284500203
train set size: 34443
test set size: 9840
validation set size: 4920
Score with a slice size of 3:	0.988109756097561
train set size: 34370
test set size: 9820
validation set size: 4910
Score with a slice size of 4:	0.9932790224032586
train set size: 34124
test set size: 9749
validation set size: 4875
Score with a slice size of 5:	0.9958970150784696
Best score with a slice size of 5 (test set 0.9958970150784696):	0.9952820512820513 on the validation set
/home/mass/GRD/maxime.tasset/anaconda3/lib/python3.6/site-packages/sklearn/feature_selection/univariate_selection.py:113: UserWarning: Features [ 792  800  810  822  835  836  838  849  851  852  854  865  867  869
  870  883  885  887  889  890  892  905  907  909  911  942  944  953
  954  956  965  967  968  970  979  981  983  984  986  997  999 1001
 1002 1015 1017 1019 1021 1034 1042 1052 1063 1064 1075 1077 1078 1089
 1091 1093 1094 1105 1107 1109 1111 1141 1151 1153 1163 1165 1167 1177
 1179 1181 1183 1203 1211 1213 1221 1223 1225 1233 1235 1237 1239 1251
 1257 1269 1281] are constant.
  UserWarning)
/home/mass/GRD/maxime.tasset/anaconda3/lib/python3.6/site-packages/sklearn/feature_selection/univariate_selection.py:114: RuntimeWarning: invalid value encountered in true_divide
  f = msb / msw
